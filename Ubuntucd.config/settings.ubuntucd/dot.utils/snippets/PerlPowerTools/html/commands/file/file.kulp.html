<html><head><title>file</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.01,
  using Pod::Simple::PullParser v2.02,
  under Perl v5.008002 at Thu Aug  5 13:56:36 2004 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<a name='___top' class='dummyTopAnchor' ></a>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>file - determine file type</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<pre lang='und' xml:lang='und'>  file [-c] [-f namefile] [-m magicfile] file ...</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>The <b>file</b> command tests each argument in an attempt to classify it. There are four sets of tests, performed in this order: filesystem tests, script tests, magic number tests, and language tests. The first test that succeeds causes the file type to be printed.</p>

<p>The type printed will usually contain one of the words <i>text</i> (the file contains only printable ASCII characters), <i>executable</i>, or <i>data</i> meaning anything else (usually &#39;binary&#39; or non-printable).</p>

<p>The filesystem tests are based on examining the return from a <i>stat</i> system call. The program checks to see if the file is empty, or if it&#39;s some sort of special file. Any known file types appropriate to the system you are running on (sockets, symbolic links, or named pipes (FIFOs) on those systems that implement them) are intuited.</p>

<p>The script tests are used when the file is an executable text file. If the first line is a &#39;#!&#39; line, then the name of the program is reported, otherwise the file is reported as &#39;commands text&#39;.</p>

<p>The magic number tests are used to check for files with data in particular fixed formats. Such files have a &#39;magic number&#39; stored in a particular place near the beginning of the file that indicates its type. Any file with some invariant identifier at a small fixed offset into the file can usually be described in this way.</p>

<p>Finally, if all of the previous tests fail and the file appears to be an ASCII file, <b>file</b> attempts to guess its language using a crude search for common tokens associated with certain languages and file types. These tests are less reliable than the previous two groups, so they are performed last.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="OPTIONS"
>OPTIONS</a></h2>

<p><b>file</b> accepts the following options:</p>

<dl>
<dt><a name="-m_magicfile"
>-m magicfile</a></dt><p class="pad"></p>

<dd>Specify an alternate magic file containing magic numbers.</dd><p class="pad"></p>

<dt><a name="-c"
>-c</a></dt><p class="pad"></p>

<dd>Cause a debug checking printout of the parsed form of the magic file and information regarding the magic file match process for any arguments. This is usually used in conjunction with -<b>m</b> to debug a new magic file before installing it.</dd><p class="pad"></p>

<dt><a name="-f_namefile"
>-f namefile</a></dt><p class="pad"></p>

<dd>Read the names of the files to be examined from <i>namefile</i> (one per line) before the argument list.</dd><p class="pad"></p>

<dt><a name="-L"
>-L</a></dt><p class="pad"></p>

<dd>Follow symbolic links.</dd><p class="pad"></p>
</dl>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="FILES"
>FILES</a></h1>

<p>The default magic file is <i>../share/magic</i> located in the distribution relative to the path of the program. If that is not found, then an attempt is made to open <i>/etc/magic</i>, a common location for a system magic file on many UNIX systems. Magic file formats vary. This version supports the BSD format including big-endian and little-endian numerics, ordered comparison of strings, and use of numerics as dates. In particular, some file formats interpret &#39;&#60;&#39; or &#39;&#62;&#39; as a literal character if matching a string, but this implementation treats them as an operator.</p>

<p>Multiple levels of sub-tests are supported.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="ENVIRONMENT"
>ENVIRONMENT</a></h1>

<p>The environment variable <i>MAGIC</i> can be used to override the default location of the magic file. Command line options still take precedence.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="BUGS"
>BUGS</a></h1>

<p><b>File</b> can&#39;t read from standard input.</p>

<p>This implementation is significantly slower than the C version. Much of the time is startup, followed by the overhead of parsing the magic file. Once the magic file is loaded after evaluating the first input file, then subsequent evaluations are a little faster. I try to speed the operation by only loading new entries from the magic file as I need them and only parsing the subtests as needed, but this doesn&#39;t help much.</p>

<p>Some simpler versions of magic (e.g. solaris&#39;) only allow the &#39;=&#39; operator for strings. Thus, the following line from the solaris /etc/magic will be misinterpreted by this implementation of <b>file</b> (An &#39;=&#39; should be prepended):</p>

<pre lang='und' xml:lang='und'> 0      string          &#60;ar&#62;            System V R1 archive</pre>

<p>The BSD version of file has a few bugs which make it more tolerant of bogus entries including:</p>

<pre lang='und' xml:lang='und'> &#62;168   belong          &#38;=0x00000004    dynamically linked

 0      string  ^!&#60;arch&#62;\n_______64E    Alpha archive</pre>

<p>This implementation accepts bogus numerics without complaining, and only complains about bogus operators if -<b>c</b> is enabled.</p>

<p>Special identification of pre-POSIX tar files is not included.</p>

<p>Many magic files include elaborate attempts to match the starting line of executable scripts. This implementation will not usually consider these magic conditions because it identifies executable scripts according to their &#39;#!&#39; line in a special test before considering magic. This is faster and typically more reliable than attempts at exact string matching on the first line of the script.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="COPYRIGHT_and_LICENSE"
>COPYRIGHT and LICENSE</a></h1>

<p>This program is copyright by dkulp 1999.</p>

<p>This program is free and open software. You may use, copy, modify, distribute and sell this program (and any modified variants) in any way you wish, provided you do not restrict others to do the same, except for the following consideration.</p>

<p>I read some of Ian F. Darwin&#39;s BSD C implementation, to try to determine how some of this was done since the specification is a little vague. I don&#39;t believe that this perl version could be construed as an &#34;altered version&#34;, but I did grab the tokens for identifying the hard-coded file types in names.h and copied some of the man page.</p>

<p>Here&#39;s his notice:</p>

<pre lang='und' xml:lang='und'>  * Copyright (c) Ian F. Darwin, 1987.
  * Written by Ian F. Darwin.
  *
  * This software is not subject to any license of the American Telephone
  * and Telegraph Company or of the Regents of the University of California.
  *
  * Permission is granted to anyone to use this software for any purpose on
  * any computer system, and to alter it and redistribute it freely, subject
  * to the following restrictions:
  *
  * 1. The author is not responsible for the consequences of use of this
  *    software, no matter how awful, even if they arise from flaws in it.
  *
  * 2. The origin of this software must not be misrepresented, either by
  *    explicit claim or by omission.  Since few users ever read sources,
  *    credits must appear in the documentation.
  *
  * 3. Altered versions must be plainly marked as such, and must not be
  *    misrepresented as being the original software.  Since few users
  *    ever read sources, credits must appear in the documentation.
  *
  * 4. This notice may not be removed or altered.</pre>

<!-- end doc -->

</body></html>
